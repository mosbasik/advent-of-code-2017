// http://adventofcode.com/2017/day/2

fn main() {
    let matrix = vec![
        vec![
            3458,
            3471,
            163,
            1299,
            170,
            4200,
            2425,
            167,
            3636,
            4001,
            4162,
            115,
            2859,
            130,
            4075,
            4269,
        ],
        vec![
            2777,
            2712,
            120,
            2569,
            2530,
            3035,
            1818,
            32,
            491,
            872,
            113,
            92,
            2526,
            477,
            138,
            1360,
        ],
        vec![
            2316,
            35,
            168,
            174,
            1404,
            1437,
            2631,
            1863,
            1127,
            640,
            1745,
            171,
            2391,
            2587,
            214,
            193,
        ],
        vec![
            197,
            2013,
            551,
            1661,
            121,
            206,
            203,
            174,
            2289,
            843,
            732,
            2117,
            360,
            1193,
            999,
            2088,
        ],
        vec![
            3925,
            3389,
            218,
            1134,
            220,
            171,
            1972,
            348,
            3919,
            3706,
            494,
            3577,
            3320,
            239,
            120,
            2508,
        ],
        vec![
            239,
            947,
            1029,
            2024,
            733,
            242,
            217,
            1781,
            2904,
            2156,
            1500,
            3100,
            497,
            2498,
            3312,
            211,
        ],
        vec![
            188,
            3806,
            3901,
            261,
            235,
            3733,
            3747,
            3721,
            267,
            3794,
            3814,
            3995,
            3004,
            915,
            4062,
            3400,
        ],
        vec![
            918,
            63,
            2854,
            2799,
            178,
            176,
            1037,
            487,
            206,
            157,
            2212,
            2539,
            2816,
            2501,
            927,
            3147,
        ],
        vec![
            186,
            194,
            307,
            672,
            208,
            351,
            243,
            180,
            619,
            749,
            590,
            745,
            671,
            707,
            334,
            224,
        ],
        vec![
            1854,
            3180,
            1345,
            3421,
            478,
            214,
            198,
            194,
            4942,
            5564,
            2469,
            242,
            5248,
            5786,
            5260,
            4127,
        ],
        vec![
            3780,
            2880,
            236,
            330,
            3227,
            1252,
            3540,
            218,
            213,
            458,
            201,
            408,
            3240,
            249,
            1968,
            2066,
        ],
        vec![
            1188,
            696,
            241,
            57,
            151,
            609,
            199,
            765,
            1078,
            976,
            1194,
            177,
            238,
            658,
            860,
            1228,
        ],
        vec![
            903,
            612,
            188,
            766,
            196,
            900,
            62,
            869,
            892,
            123,
            226,
            57,
            940,
            168,
            165,
            103,
        ],
        vec![
            710,
            3784,
            83,
            2087,
            2582,
            3941,
            97,
            1412,
            2859,
            117,
            3880,
            411,
            102,
            3691,
            4366,
            4104,
        ],
        vec![
            3178,
            219,
            253,
            1297,
            3661,
            1552,
            8248,
            678,
            245,
            7042,
            260,
            581,
            7350,
            431,
            8281,
            8117,
        ],
        vec![
            837,
            80,
            95,
            281,
            652,
            822,
            1028,
            1295,
            101,
            1140,
            88,
            452,
            85,
            444,
            649,
            1247,
        ],
    ];

    println!("{}", matrix_checksum(&matrix));
}


fn row_checksum(row: &Vec<u16>) -> u16 {
    row.iter().max().expect("no max") - row.iter().min().expect("no min")
}

fn matrix_checksum(matrix: &Vec<Vec<u16>>) -> u16 {
    matrix
        .iter()
        .map(row_checksum)
        .collect::<Vec<u16>>()
        .iter()
        .sum::<u16>()
}

#[test]
fn row_test_1() {
    assert!(row_checksum(&vec![5, 1, 9, 5]) == 8);
}

#[test]
fn row_test_2() {
    assert!(row_checksum(&vec![7, 5, 3]) == 4);
}

#[test]
fn row_test_3() {
    assert!(row_checksum(&vec![2, 4, 6, 8]) == 6);
}

#[test]
fn matrix_test() {
    assert!(matrix_checksum(&vec![vec![5, 1, 9, 5], vec![7, 5, 3], vec![2, 4, 6, 8]]) == 18);
}
